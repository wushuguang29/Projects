<template>
	<view class="content">
	 
		<view class="text-area" :style='{"background-image":"url("+img+")"}'>
		<!-- 	<text class="title">{{title}}</text> -->
		<view class="zixun" @click="goto('/pages/views/advisory/index')"><span class="zixun_text">咨询</span></view>
		<!-- <button :plain="true" @click="goto('/pages/index/login')" class="loginBtn">请登录</button> -->
		
		</view>
		<view class="tan-xf" v-if="!flag">
			<view class="tan-left" >
				<image src="../../static/home_menber.png" style="width: 4.5rem;height: 100%;"></image>
			</view>
			<view class="tan-rigth"  @click="goto('/pages/index/login')" >
				<view style="padding: 0.5rem 0 0 0;padding-bottom: 0.5rem;padding-bottom: 0.6rem;"><h3 style="    font-size: 43rpx;font-weight: 500;padding: 0 0 0 5%;">登录/注册</h3></view>
				<view ><span style="font-size: 0.5rem;">请登录已获得更好的测评服务</span></view>
			</view>
		</view>
		<view class="tan-xf" v-if="flag" >
			<view class="tan-left" @click="avater">
				<image :src="myData.avatar" style="width: 4.5rem;height: 100%;"></image>
			</view>
			<view class="tan-rigths"   >
				<view style="    padding: 0.5rem 0 0 0.5rem; padding-bottom: 0.6rem;font-size: 35rpx;font-weight: 700;"><h3>{{myData.name}}</h3></view>
				<view ><span style="padding: 0 0 0 0.5rem;font-size: 34rpx;font-weight: 400;color: #adadad;">{{myData.phone==null?"":myData.phone}}</span></view>
			</view>
			<view class="tan-rigthtwo" @click="goto('/pages/views/member/memberTable')">
				<view style="height: 50%;text-align: -webkit-center;margin-top: 0.5rem;">
					<view style="width:50%;height: 100%">
						<image src="../../static/home_menber.png" style="width: 100%;height: 100%;"></image>
					</view>
					
				</view>
				<view style="display: flex; color: rgb(71, 195, 168);margin: 8% 0 0 0.6rem;" >
					<view style="padding-right: 0.3rem;font-size: 88%;padding-top: 0%;"  >成员管理</view>
					<view>
						<image src="../../static/home_back.png" mode="" style="width: 15px;height: 15px"></image>
					</view>
				</view>
			</view>
		</view>
		<view class="tan-main-wrap">
		    <view class="tan-list-box" @click="goto('/pages/views/physiological/subscription?type=1')">
		        <view class="tan-img-pic"><image src="../../static/home_xwei.png" mode="widthFix"></image></view>
		        <view class="tan-list-title">
		            <span class="tan-span" >生理</span>
		        </view>
		    </view>
		    <view class="tan-list-box" @click="goto('/pages/views/physiological/subscription?type=2')">
		        <view class="tan-img-pic"><image src="../../static/home_xinli.png" mode="widthFix"></image></view>
		        <view class="tan-list-title">
		            <span class="tan-span">心理</span>
		        </view>
		    </view>
		    <view class="tan-list-box" @click="goto('/pages/views/physiological/subscription?type=3')">
		        <view class="tan-img-pic"><image src="../../static/home_yund.png" mode="widthFix"></image></view>
		        <view class="tan-list-title">
		            <span class="tan-span">行为</span>
		        </view>
		    </view>
		    <view class="tan-list-box" @click="goto('/pages/views/physiological/subscription?type=4')">
		        <view class="tan-img-pic"><image src="../../static/home_shehui.png" mode="widthFix"></image></view>
		        <view class="tan-list-title">
		            <span class="tan-span">社会</span>
		        </view>
		    </view>
		   
		</view>
	</view>
</template>

<script>
	import img from '../../static/home_bg.png'
	export default {
		 // onLoad: function (option) {
		 //  //       console.log("option",option);
			// 	// if(option.flag){
			// 	// 	this.flag=option.flag;
			// 	// }
			// 	console.log("进入")
			// 	this.myData=uni.getStorageSync('rowData');
			// 	   console.log('mydata',this.myData)
			// 	if(this.myData.flag){
			// 		this.flag=this.myData.flag;
			// 	}
			// 	console.log("OK",this.myData)
		 //    },
			
			

		data() {
			return {
				flag:false,
				title: 'Hello',
				myData:{},
				img
			}
		},
		onShow:function(option){
			// this.$ajax.get({
			// 	url: '/api/AppUsers/getUserInfo',
			// 	param: {},
			// 	header: {
			// 		'Content-Type':'application/json;charset=UTF-8',
			// 					'x-requested-with':"XMLHttpRequest"
			// 	},
			// }).then((res) => {
			// 	if(res.data.code==0){
			// 		this.myData=res.data.data;
			// 		this.flag=true
			// 	}
				
			// }) 
			//       console.log("option",option);
							// if(option.flag){
							// 	this.flag=option.flag;
							// }
							// this.$ajax.get({
							// 	url: '/api/AppUsers/getUserInfo',
							// 	param: {},
							// 	header: {
							// 		'Content-Type':'application/json;charset=UTF-8',
							// 					'x-requested-with':"XMLHttpRequest"
							// 	},
							// }).then((res) => {
							// 	this.myData=res.data.data;
							// }) 
							console.log("1111")
				this.myData=uni.getStorageSync('rowData');
				   console.log('mydata',uni.getStorageSync('rowData'))
				if(this.myData.flag){
					this.flag=this.myData.flag;
				}
				console.log("OK",this.myData,this.flag)	
							
		},
		methods: {
			avater(){
				console.log("1111");
				uni.switchTab({
				 	url: "/pages/views/PersonalCenter/PersonalCenter"
				 });
			},
			getToken() {
				// let myData=uni.getStorageSync('userToken');
				// console.log("获取缓存",myData);
				// uni.getStorage({
				// 	key: 'userToken',
				// 	success: (res) => {
				// 	// console.log('这是获取key中的内容',res) 
				// 	this.tokenData = res.data;
				// 	console.log('这是获取token', this.tokenData)
				// 	if (this.tokenData) {
					   
				// 	}
			 
				// }
			 // });
			 },
          goto(url) {
                         uni.redirectTo({
                             url:url
                         })
                     }
		},
		created() {
		
		}
	}
</script>

<style>
	.tan-rigths{
		width:50%
	}
	.tan-rigthtwo{
		    width: 26.5%;
	}
	.tan-left{
		width:25%;
	    padding-right:0.5rem ;
		margin-left: 0.6rem;
	}
	.tan-rigth{
		width:70%;
		
	}
	
	.tan-xf{
		display: flex;
		border: 0.1rem solid #f5f5f5;
		    position: absolute;
		    padding: 0rem;
		    margin: -36% 0 26% 0;
		    width: 90%;
		    height: 5rem;
		    background-color: #fff;
			    border-radius: 6px;
-moz-border-radius:25px;
	}
	.tan-main-wrap{
	    display: flex;  
	    flex-flow:wrap;
	    
		text-align: center;
	}
	.tan-list-box{
	   
	    width: 30%;
	    background-color: #fff;
	   /* border-radius: 8px; */
	   /* border:1px solid #f5f5f5; */
	    overflow: hidden;
		margin: 0 0 0 3rem;
	}
	.tan-img-pic{
	    width: 100%;
	   
	}
	.tan-img-pic>image{
	    width: 100%;
	    height: 100%;
	}
	.tan-list-title{
	    margin: 20rpx;
	    font-size: 30rpx;
		background: url('../../static/home_title.png');
		    background-size: 100% 25%;
		        background-position: 0.1rem 1.5rem;
		        background-repeat: no-repeat;
		        height: 2rem;
		  
	}
	.tan-span{
		/* font-size: 1.2rem; */
	}
	.loginBtn{
		width:100%;
		margin: 59rpx 40rpx 0;
		background: linear-gradient(to left,#00ffff,#0000ff);
		color: #fff;
	}
	.content {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
	}

	.logo {
		height: 200rpx;
		width: 200rpx;
		margin-top: 200rpx;
		margin-left: auto;
		margin-right: auto;
		margin-bottom: 50rpx;
	}
   .zixun{
	              height: 2rem;
	                  width: 3rem;
	                  border: 2rpx solid #fff;
	                  margin: 0 0 0 85%;
	                  border-radius: 50%;
	                  text-align: -webkit-center;
   }
   .zixun_text{
	                   font-size: 1rem;
	                   color: #fff;
	                   font-weight: 400;
	                   width: 2.5rem;
   }
	.text-area {
		width: 100%;
		margin-top: 5px;
		display: flex;
		justify-content: center;
		border-bottom: 1px solid #f5f5f5;
		padding-bottom: 2em;
		background-size: cover;height: 8rem;margin-top:0;margin-bottom:3rem
	}

	.title {
		font-size: 36rpx;
		color: #8f8f94;
	}
</style>
