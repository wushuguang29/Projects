{"version":3,"sources":["uni-app:///main.js","webpack:///D:/phpstudy_pro/WWW/xykfpd_app/pages/views/PersonalCenter/upload.vue?1222","webpack:///D:/phpstudy_pro/WWW/xykfpd_app/pages/views/PersonalCenter/upload.vue?28a9","webpack:///D:/phpstudy_pro/WWW/xykfpd_app/pages/views/PersonalCenter/upload.vue?c8c1","webpack:///D:/phpstudy_pro/WWW/xykfpd_app/pages/views/PersonalCenter/upload.vue?de47","uni-app:///pages/views/PersonalCenter/upload.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,8G;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;;;AAGrD;AACwN;AACxN,gBAAgB,8NAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,2OAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAA+1B,CAAgB,q2BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACSn3B,4F;;;;;;;;AAGA;eAEA,EACA,IADA,kBACA,CACA,SACA;AACA,aAFA,EAGA,YAHA;AAIA,kBAJA;AAKA,kBALA;AAMA,gBANA;;AAQA,GAVA;AAWA,SAXA,qBAWA;;AAEA,GAbA;AAcA;;AAEA;AACA,sCADA;AAEA,eAFA;AAGA;AACA,wDADA;AAEA,4CAFA,EAHA;;AAOA,QAPA,CAOA;AACA;AACA;AACA;AACA,KAXA;AAYA,GA5BA;AA6BA;AACA,UADA,oBACA;AACA;AACA;AACA;AACA;AACA,8DADA,EACA;AACA,sCAFA;AAGA,wBAHA;AAIA;AACA,8DADA,EAJA;;AAOA,wBAPA;AAQA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wEADA;;;AAIA;;AAEA;AACA,iCADA;AAEA,gCAFA;;AAIA;AACA,iBAPA,EAOA,IAPA;AAQA,eAdA,MAcA;AACA;AACA,+BADA;AAEA,8BAFA;;AAIA;;AAEA,aA1CA;;AA4CA,SA/CA;;AAiDA,KAnDA;AAoDA,UApDA,oBAoDA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,KA/DA,EA7BA,E","file":"pages/views/PersonalCenter/upload.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/views/PersonalCenter/upload.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./upload.vue?vue&type=template&id=2b38f29e&\"\nvar renderjs\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/views/PersonalCenter/upload.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload.vue?vue&type=template&id=2b38f29e&\"","var components\ntry {\n  components = {\n    uAvatar: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-avatar/u-avatar\" */ \"uview-ui/components/u-avatar/u-avatar.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Admin\\\\Downloads\\\\HBuilderX.2.9.8.20201110\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\r\n\t<view style=\"margin: 0 auto;text-align: center;\"><u-avatar :src=\"src\" size=\"large\" mode=\"square\" sex-icon=\"close\"></u-avatar></view>\r\n\t\t\t<u-button @click=\"upload\">上传头像</u-button>\r\n\t</view>\n</template>\n\n<script>\r\n\timport config from '../../../api/config.js'\r\n\r\n\t\r\n\t//  公共的方法\r\n\t \r\n\texport default {\r\n\t\t\tdata() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t// action: config.host+'/index/Folder/upload',\r\n\t\t\t\t\tsrc:\"\",\r\n\t\t\t\t\tfilesArr: [],\r\n\t\t\t\t\tformData:{},\r\n\t\t\t\t\tfileList:\"\",\r\n\t\t\t\t\tmyData:{}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcreated() {\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tonShow:function(option){\r\n\t\t\t\t\r\n\t\t\t\tthis.$ajax.get({\r\n\t\t\t\t\turl: '/api/AppUsers/getUserInfo',\r\n\t\t\t\t\tparam: {},\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'Content-Type':'application/json;charset=UTF-8',\r\n\t\t\t\t\t\t\t\t\t'x-requested-with':\"XMLHttpRequest\"\r\n\t\t\t\t\t},\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tconsole.log(\"res\",res)\r\n\t\t\t\t\tthis.myData=res.data.data;\r\n\t\t\t\t\tthis.src=this.myData.avatar\r\n\t\t\t\t}) \r\n\t\t\t},\r\n\t\t\tmethods: {\r\n\t\t\t\tupload(){\r\n\t\t\t\t          uni.chooseImage({\r\n\t\t\t\t              success: (chooseImageRes) => {\r\n\t\t\t\t                  const tempFilePaths = chooseImageRes.tempFilePaths;\r\n\t\t\t\t                  uni.uploadFile({\r\n\t\t\t\t                      url: config.host+'/api/AppUsers/upload', //仅为示例，非真实的接口地址\r\n\t\t\t\t                      filePath: tempFilePaths[0],\r\n\t\t\t\t                      name: 'file',\r\n\t\t\t\t                header: {\r\n\t\t\t\t                  'Authorization':uni.getStorageSync('userToken')\r\n\t\t\t\t                },\r\n\t\t\t\t                      formData: {},\r\n\t\t\t\t                      success: (uploadFileRes) => {\r\n\t\t\t\t\t\t\t\t\t\t  \r\n\t\t\t\t                    console.log(uploadFileRes.data);\r\n\t\t\t\t\t\t\t\t\tlet\tdata= JSON.parse(uploadFileRes.data) \r\n\t\t\t\t\t\t\t\t\tconsole.log(\"data\",data)\r\n\t\t\t\t\t\t\t\t\t// this.formData.src=data.data.path[0];\r\n\t\t\t\t\t\t\t\t\tthis.src=data.data.path[0];\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.formData=uni.getStorageSync('rowData');\r\n\t\t\t\t\t\t\t\t// uni.setStorageSync('rowData', res.data.data);\r\n\t\t\t\t\t\t\t\tconsole.log(\"111\",this.formData)\r\n\t\t\t\t\t\t\t\tthis.formData.avatar=this.src;\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('rowData', this.formData);\r\n\t\t\t\t\t\t\t\tif(data.code==0){\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\turl:'/pages/views/PersonalCenter/PersonalInformation'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tvar jian=setInterval(()=>{\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"操作成功\",\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tclearInterval(jian)\r\n\t\t\t\t\t\t\t\t\t},2000) \r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"操作失败\",\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t                      }\r\n\t\t\t\t                  });\r\n\t\t\t\t              }\r\n\t\t\t\t          });\r\n\t\t\t\t        },\r\n\t\t\t\tsubmit() {\r\n\t\t\t\t\tlet files = [];\r\n\t\t\t\t\t// 通过filter，筛选出上传进度为100的文件(因为某些上传失败的文件，进度值不为100，这个是可选的操作)\r\n\t\t\t\t\t// files = this.$refs.uUpload.lists.filter(val => {\r\n\t\t\t\t\t// \treturn val.progress == 100;\r\n\t\t\t\t\t// })\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 如果您不需要进行太多的处理，直接如下即可\r\n\t\t\t\t\t// files = this.$refs.uUpload.lists;\r\n\t\t\t\t\tconsole.log(files,this.formData)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":""}